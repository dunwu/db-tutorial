---
title: sqlite
date: 2020-08-26 20:30:39
permalink: /pages/ec4fc2/
---

# SQLite

> SQLite æ˜¯ä¸€ä¸ªå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ã€‚
> :point_right: [å®Œæ•´ç¤ºä¾‹æºç ](https://github.com/dunwu/db-tutorial/tree/master/codes/javadb/javadb-sqlite)

## ç®€ä»‹

### ä¼˜ç‚¹

- SQLite æ˜¯è‡ªç»™è‡ªè¶³çš„ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦ä»»ä½•å¤–éƒ¨çš„ä¾èµ–ã€‚
- SQLite æ˜¯æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦å®‰è£…æˆ–ç®¡ç†ã€‚
- SQLite äº‹åŠ¡æ˜¯å®Œå…¨å…¼å®¹ ACID çš„ï¼Œå…è®¸ä»å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å®‰å…¨è®¿é—®ã€‚
- SQLite æ˜¯éå¸¸å°çš„ï¼Œæ˜¯è½»é‡çº§çš„ï¼Œå®Œå…¨é…ç½®æ—¶å°äº 400KiBï¼Œçœç•¥å¯é€‰åŠŸèƒ½é…ç½®æ—¶å°äº 250KiBã€‚
- SQLite æ”¯æŒ SQL92ï¼ˆSQL2ï¼‰æ ‡å‡†çš„å¤§å¤šæ•°æŸ¥è¯¢è¯­è¨€çš„åŠŸèƒ½ã€‚
- ä¸€ä¸ªå®Œæ•´çš„ SQLite æ•°æ®åº“æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„è·¨å¹³å°çš„ç£ç›˜æ–‡ä»¶ã€‚
- SQLite ä½¿ç”¨ ANSI-C ç¼–å†™çš„ï¼Œå¹¶æä¾›äº†ç®€å•å’Œæ˜“äºä½¿ç”¨çš„ APIã€‚
- SQLite å¯åœ¨ UNIXï¼ˆLinux, Mac OS-X, Android, iOSï¼‰å’Œ Windowsï¼ˆWin32, WinCE, WinRTï¼‰ä¸­è¿è¡Œã€‚

### å±€é™

| ç‰¹æ€§             | æè¿°                                                                                                             |
| ---------------- | ---------------------------------------------------------------------------------------------------------------- |
| RIGHT OUTER JOIN | åªå®ç°äº† LEFT OUTER JOINã€‚                                                                                       |
| FULL OUTER JOIN  | åªå®ç°äº† LEFT OUTER JOINã€‚                                                                                       |
| ALTER TABLE      | æ”¯æŒ RENAME TABLE å’Œ ALTER TABLE çš„ ADD COLUMN variants å‘½ä»¤ï¼Œä¸æ”¯æŒ DROP COLUMNã€ALTER COLUMNã€ADD CONSTRAINTã€‚ |
| Trigger æ”¯æŒ     | æ”¯æŒ FOR EACH ROW è§¦å‘å™¨ï¼Œä½†ä¸æ”¯æŒ FOR EACH STATEMENT è§¦å‘å™¨ã€‚                                                   |
| VIEWs            | åœ¨ SQLite ä¸­ï¼Œè§†å›¾æ˜¯åªè¯»çš„ã€‚æ‚¨ä¸å¯ä»¥åœ¨è§†å›¾ä¸Šæ‰§è¡Œ DELETEã€INSERT æˆ– UPDATE è¯­å¥ã€‚                                 |
| GRANT å’Œ REVOKE  | å¯ä»¥åº”ç”¨çš„å”¯ä¸€çš„è®¿é—®æƒé™æ˜¯åº•å±‚æ“ä½œç³»ç»Ÿçš„æ­£å¸¸æ–‡ä»¶è®¿é—®æƒé™ã€‚                                                       |

### å®‰è£…

Sqlite å¯åœ¨ UNIXï¼ˆLinux, Mac OS-X, Android, iOSï¼‰å’Œ Windowsï¼ˆWin32, WinCE, WinRTï¼‰ä¸­è¿è¡Œã€‚

ä¸€èˆ¬ï¼ŒLinux å’Œ Mac ä¸Šä¼šé¢„å®‰è£… sqliteã€‚å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥åœ¨[å®˜æ–¹ä¸‹è½½åœ°å€](https://www.sqlite.org/download.html)ä¸‹è½½åˆé€‚å®‰è£…ç‰ˆæœ¬ï¼Œè‡ªè¡Œå®‰è£…ã€‚

## è¯­æ³•

> è¿™é‡Œä¸ä¼šè¯¦ç»†åˆ—ä¸¾æ‰€æœ‰ SQL è¯­æ³•ï¼Œä»…åˆ—ä¸¾ SQLite é™¤æ ‡å‡† SQL ä»¥å¤–çš„ï¼Œä¸€äº›è‡ªèº«ç‰¹æ®Šçš„ SQL è¯­æ³•ã€‚
>
> :point_right: æ‰©å±•é˜…è¯»ï¼š[æ ‡å‡† SQL åŸºæœ¬è¯­æ³•](https://github.com/dunwu/blog/blob/master/docs/database/sql/sql.md)

### å¤§å°å†™æ•æ„Ÿ

SQLite æ˜¯**ä¸åŒºåˆ†å¤§å°å†™**çš„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å‘½ä»¤æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œæ¯”å¦‚ **GLOB** å’Œ **glob** åœ¨ SQLite çš„è¯­å¥ä¸­æœ‰ä¸åŒçš„å«ä¹‰ã€‚

### æ³¨é‡Š

```sql
-- å•è¡Œæ³¨é‡Š
/*
 å¤šè¡Œæ³¨é‡Š1
 å¤šè¡Œæ³¨é‡Š2
 */
```

### åˆ›å»ºæ•°æ®åº“

å¦‚ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º test çš„æ•°æ®åº“ï¼š

```shell
$ sqlite3 test.db
SQLite version 3.7.17 2013-05-20 00:56:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
```

### æŸ¥çœ‹æ•°æ®åº“

```shell
sqlite> .databases
seq  name             file
---  ---------------  ----------------------------------------------------------
0    main             /root/test.db
```

### é€€å‡ºæ•°æ®åº“

```shell
sqlite> .quit
```

### é™„åŠ æ•°æ®åº“

å‡è®¾è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“åœ¨åŒä¸€æ—¶é—´æœ‰å¤šä¸ªæ•°æ®åº“å¯ç”¨ï¼Œæ‚¨æƒ³ä½¿ç”¨å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚

SQLite çš„ **`ATTACH DATABASE`** è¯­å¥æ˜¯ç”¨æ¥é€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“ï¼Œä½¿ç”¨è¯¥å‘½ä»¤åï¼Œæ‰€æœ‰çš„ SQLite è¯­å¥å°†åœ¨é™„åŠ çš„æ•°æ®åº“ä¸‹æ‰§è¡Œã€‚

```shell
sqlite> ATTACH DATABASE 'test.db' AS 'test';
sqlite> .databases
seq  name             file
---  ---------------  ----------------------------------------------------------
0    main             /root/test.db
2    test             /root/test.db
```

> ğŸ”” æ³¨æ„ï¼šæ•°æ®åº“å **`main`** å’Œ **`temp`** è¢«ä¿ç•™ç”¨äºä¸»æ•°æ®åº“å’Œå­˜å‚¨ä¸´æ—¶è¡¨åŠå…¶ä»–ä¸´æ—¶æ•°æ®å¯¹è±¡çš„æ•°æ®åº“ã€‚è¿™ä¸¤ä¸ªæ•°æ®åº“åç§°å¯ç”¨äºæ¯ä¸ªæ•°æ®åº“è¿æ¥ï¼Œä¸”ä¸åº”è¯¥è¢«ç”¨äºé™„åŠ ï¼Œå¦åˆ™å°†å¾—åˆ°ä¸€ä¸ªè­¦å‘Šæ¶ˆæ¯ã€‚

### åˆ†ç¦»æ•°æ®åº“

SQLite çš„ **`DETACH DATABASE`** è¯­å¥æ˜¯ç”¨æ¥æŠŠå‘½åæ•°æ®åº“ä»ä¸€ä¸ªæ•°æ®åº“è¿æ¥åˆ†ç¦»å’Œæ¸¸ç¦»å‡ºæ¥ï¼Œè¿æ¥æ˜¯ä¹‹å‰ä½¿ç”¨ **`ATTACH`** è¯­å¥é™„åŠ çš„ã€‚

```shell
sqlite> .databases
seq  name             file
---  ---------------  ----------------------------------------------------------
0    main             /root/test.db
2    test             /root/test.db
sqlite> DETACH DATABASE 'test';
sqlite> .databases
seq  name             file
---  ---------------  ----------------------------------------------------------
0    main             /root/test.db
```

### å¤‡ä»½æ•°æ®åº“

å¦‚ä¸‹ï¼Œå¤‡ä»½ test æ•°æ®åº“åˆ° `/home/test.sql`

```shell
sqlite3 test.db .dump > /home/test.sql
```

### æ¢å¤æ•°æ®åº“

å¦‚ä¸‹ï¼Œæ ¹æ® `/home/test.sql` æ¢å¤ test æ•°æ®åº“

```shell
sqlite3 test.db < test.sql
```

## æ•°æ®ç±»å‹

SQLite ä½¿ç”¨ä¸€ä¸ªæ›´æ™®éçš„åŠ¨æ€ç±»å‹ç³»ç»Ÿã€‚åœ¨ SQLite ä¸­ï¼Œå€¼çš„æ•°æ®ç±»å‹ä¸å€¼æœ¬èº«æ˜¯ç›¸å…³çš„ï¼Œè€Œä¸æ˜¯ä¸å®ƒçš„å®¹å™¨ç›¸å…³ã€‚

### SQLite å­˜å‚¨ç±»

æ¯ä¸ªå­˜å‚¨åœ¨ SQLite æ•°æ®åº“ä¸­çš„å€¼éƒ½å…·æœ‰ä»¥ä¸‹å­˜å‚¨ç±»ä¹‹ä¸€ï¼š

| å­˜å‚¨ç±»    | æè¿°                                                                    |
| --------- | ----------------------------------------------------------------------- |
| `NULL`    | å€¼æ˜¯ä¸€ä¸ª NULL å€¼ã€‚                                                      |
| `INTEGER` | å€¼æ˜¯ä¸€ä¸ªå¸¦ç¬¦å·çš„æ•´æ•°ï¼Œæ ¹æ®å€¼çš„å¤§å°å­˜å‚¨åœ¨ 1ã€2ã€3ã€4ã€6 æˆ– 8 å­—èŠ‚ä¸­ã€‚    |
| `REAL`    | å€¼æ˜¯ä¸€ä¸ªæµ®ç‚¹å€¼ï¼Œå­˜å‚¨ä¸º 8 å­—èŠ‚çš„ IEEE æµ®ç‚¹æ•°å­—ã€‚                         |
| `TEXT`    | å€¼æ˜¯ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ•°æ®åº“ç¼–ç ï¼ˆUTF-8ã€UTF-16BE æˆ– UTF-16LEï¼‰å­˜å‚¨ã€‚ |
| `BLOB`    | å€¼æ˜¯ä¸€ä¸ª blob æ•°æ®ï¼Œå®Œå…¨æ ¹æ®å®ƒçš„è¾“å…¥å­˜å‚¨ã€‚                              |

SQLite çš„å­˜å‚¨ç±»ç¨å¾®æ¯”æ•°æ®ç±»å‹æ›´æ™®éã€‚INTEGER å­˜å‚¨ç±»ï¼Œä¾‹å¦‚ï¼ŒåŒ…å« 6 ç§ä¸åŒçš„ä¸åŒé•¿åº¦çš„æ•´æ•°æ•°æ®ç±»å‹ã€‚

### SQLite äº²å’Œ(Affinity)ç±»å‹

SQLite æ”¯æŒåˆ—çš„äº²å’Œç±»å‹æ¦‚å¿µã€‚ä»»ä½•åˆ—ä»ç„¶å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œå½“æ•°æ®æ’å…¥æ—¶ï¼Œè¯¥å­—æ®µçš„æ•°æ®å°†ä¼šä¼˜å…ˆé‡‡ç”¨äº²ç¼˜ç±»å‹ä½œä¸ºè¯¥å€¼çš„å­˜å‚¨æ–¹å¼ã€‚SQLite ç›®å‰çš„ç‰ˆæœ¬æ”¯æŒä»¥ä¸‹äº”ç§äº²ç¼˜ç±»å‹ï¼š

| äº²å’Œç±»å‹  | æè¿°                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `TEXT`    | æ•°å€¼å‹æ•°æ®åœ¨è¢«æ’å…¥ä¹‹å‰ï¼Œéœ€è¦å…ˆè¢«è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼ï¼Œä¹‹åå†æ’å…¥åˆ°ç›®æ ‡å­—æ®µä¸­ã€‚                                                                                                                                                                                                                                                                                                                                                                                            |
| `NUMERIC` | å½“æ–‡æœ¬æ•°æ®è¢«æ’å…¥åˆ°äº²ç¼˜æ€§ä¸º NUMERIC çš„å­—æ®µä¸­æ—¶ï¼Œå¦‚æœè½¬æ¢æ“ä½œä¸ä¼šå¯¼è‡´æ•°æ®ä¿¡æ¯ä¸¢å¤±ä»¥åŠå®Œå…¨å¯é€†ï¼Œé‚£ä¹ˆ SQLite å°±ä¼šå°†è¯¥æ–‡æœ¬æ•°æ®è½¬æ¢ä¸º INTEGER æˆ– REAL ç±»å‹çš„æ•°æ®ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼ŒSQLite ä»ä¼šä»¥ TEXT æ–¹å¼å­˜å‚¨è¯¥æ•°æ®ã€‚å¯¹äº NULL æˆ– BLOB ç±»å‹çš„æ–°æ•°æ®ï¼ŒSQLite å°†ä¸åšä»»ä½•è½¬æ¢ï¼Œç›´æ¥ä»¥ NULL æˆ– BLOB çš„æ–¹å¼å­˜å‚¨è¯¥æ•°æ®ã€‚éœ€è¦é¢å¤–è¯´æ˜çš„æ˜¯ï¼Œå¯¹äºæµ®ç‚¹æ ¼å¼çš„å¸¸é‡æ–‡æœ¬ï¼Œå¦‚"30000.0"ï¼Œå¦‚æœè¯¥å€¼å¯ä»¥è½¬æ¢ä¸º INTEGER åŒæ—¶åˆä¸ä¼šä¸¢å¤±æ•°å€¼ä¿¡æ¯ï¼Œé‚£ä¹ˆ SQLite å°±ä¼šå°†å…¶è½¬æ¢ä¸º INTEGER çš„å­˜å‚¨æ–¹å¼ã€‚ |
| `INTEGER` | å¯¹äºäº²ç¼˜ç±»å‹ä¸º INTEGER çš„å­—æ®µï¼Œå…¶è§„åˆ™ç­‰åŒäº NUMERICï¼Œå”¯ä¸€å·®åˆ«æ˜¯åœ¨æ‰§è¡Œ CAST è¡¨è¾¾å¼æ—¶ã€‚                                                                                                                                                                                                                                                                                                                                                                               |
| `REAL`    | å…¶è§„åˆ™åŸºæœ¬ç­‰åŒäº NUMERICï¼Œå”¯ä¸€çš„å·®åˆ«æ˜¯ä¸ä¼šå°†"30000.0"è¿™æ ·çš„æ–‡æœ¬æ•°æ®è½¬æ¢ä¸º INTEGER å­˜å‚¨æ–¹å¼ã€‚                                                                                                                                                                                                                                                                                                                                                                        |
| `NONE`    | ä¸åšä»»ä½•çš„è½¬æ¢ï¼Œç›´æ¥ä»¥è¯¥æ•°æ®æ‰€å±çš„æ•°æ®ç±»å‹è¿›è¡Œå­˜å‚¨ã€‚                                                                                                                                                                                                                                                                                                                                                                                                                |

### SQLite äº²å’Œç±»å‹(Affinity)åŠç±»å‹åç§°

ä¸‹è¡¨åˆ—å‡ºäº†å½“åˆ›å»º SQLite3 è¡¨æ—¶å¯ä½¿ç”¨çš„å„ç§æ•°æ®ç±»å‹åç§°ï¼ŒåŒæ—¶ä¹Ÿæ˜¾ç¤ºäº†ç›¸åº”çš„äº²å’Œç±»å‹ï¼š

| æ•°æ®ç±»å‹                                                                                                                        | äº²å’Œç±»å‹  |
| ------------------------------------------------------------------------------------------------------------------------------- | --------- |
| `INT`, `INTEGER`, `TINYINT`, `SMALLINT`, `MEDIUMINT`, `BIGINT`, `UNSIGNED BIG INT`, `INT2`, `INT8`                              | `INTEGER` |
| `CHARACTER(20)`, `VARCHAR(255)`, `VARYING CHARACTER(255)`, `NCHAR(55)`, `NATIVE CHARACTER(70)`, `NVARCHAR(100)`, `TEXT`, `CLOB` | `TEXT`    |
| `BLOB`, `no datatype specified`                                                                                                 | `NONE`    |
| `REAL`, `DOUBLE`, `DOUBLE PRECISION`, `FLOAT`                                                                                   | `REAL`    |
| `NUMERIC`, `DECIMAL(10,5)`, `BOOLEAN`, `DATE`, `DATETIME`                                                                       | `NUMERIC` |

### Boolean æ•°æ®ç±»å‹

SQLite æ²¡æœ‰å•ç‹¬çš„ Boolean å­˜å‚¨ç±»ã€‚ç›¸åï¼Œå¸ƒå°”å€¼è¢«å­˜å‚¨ä¸ºæ•´æ•° 0ï¼ˆfalseï¼‰å’Œ 1ï¼ˆtrueï¼‰ã€‚

### Date ä¸ Time æ•°æ®ç±»å‹

SQLite æ²¡æœ‰ä¸€ä¸ªå•ç‹¬çš„ç”¨äºå­˜å‚¨æ—¥æœŸå’Œ/æˆ–æ—¶é—´çš„å­˜å‚¨ç±»ï¼Œä½† SQLite èƒ½å¤ŸæŠŠæ—¥æœŸå’Œæ—¶é—´å­˜å‚¨ä¸º TEXTã€REAL æˆ– INTEGER å€¼ã€‚

| å­˜å‚¨ç±»    | æ—¥æœŸæ ¼å¼                                                       |
| --------- | -------------------------------------------------------------- |
| `TEXT`    | æ ¼å¼ä¸º "YYYY-MM-DD HH:MM:SS.SSS" çš„æ—¥æœŸã€‚                      |
| `REAL`    | ä»å…¬å…ƒå‰ 4714 å¹´ 11 æœˆ 24 æ—¥æ ¼æ—å°¼æ²»æ—¶é—´çš„æ­£åˆå¼€å§‹ç®—èµ·çš„å¤©æ•°ã€‚ |
| `INTEGER` | ä» 1970-01-01 00:00:00 UTC ç®—èµ·çš„ç§’æ•°ã€‚                        |

æ‚¨å¯ä»¥ä»¥ä»»ä½•ä¸Šè¿°æ ¼å¼æ¥å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å†…ç½®çš„æ—¥æœŸå’Œæ—¶é—´å‡½æ•°æ¥è‡ªç”±è½¬æ¢ä¸åŒæ ¼å¼ã€‚

## SQLite å‘½ä»¤

### å¿«é€Ÿå¼€å§‹

#### è¿›å…¥ SQLite æ§åˆ¶å°

```shell
$ sqlite3
SQLite version 3.7.17 2013-05-20 00:56:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite>
```

#### è¿›å…¥ SQLite æ§åˆ¶å°å¹¶æŒ‡å®šæ•°æ®åº“

```shell
$ sqlite3 test.db
SQLite version 3.7.17 2013-05-20 00:56:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite>
```

#### é€€å‡º SQLite æ§åˆ¶å°

```shell
sqlite>.quit
```

#### æŸ¥çœ‹å‘½ä»¤å¸®åŠ©

```shell
sqlite>.help
```

### å¸¸ç”¨å‘½ä»¤æ¸…å•

| å‘½ä»¤                  | æè¿°                                                                                                                                                                                                                                                      |
| --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| .backup ?DB? FILE     | å¤‡ä»½ DB æ•°æ®åº“ï¼ˆé»˜è®¤æ˜¯ "main"ï¼‰åˆ° FILE æ–‡ä»¶ã€‚                                                                                                                                                                                                             |
| .bail ON\|OFF         | å‘ç”Ÿé”™è¯¯ååœæ­¢ã€‚é»˜è®¤ä¸º OFFã€‚                                                                                                                                                                                                                              |
| .databases            | åˆ—å‡ºæ•°æ®åº“çš„åç§°åŠå…¶æ‰€ä¾é™„çš„æ–‡ä»¶ã€‚                                                                                                                                                                                                                        |
| .dump ?TABLE?         | ä»¥ SQL æ–‡æœ¬æ ¼å¼è½¬å‚¨æ•°æ®åº“ã€‚å¦‚æœæŒ‡å®šäº† TABLE è¡¨ï¼Œåˆ™åªè½¬å‚¨åŒ¹é… LIKE æ¨¡å¼çš„ TABLE è¡¨ã€‚                                                                                                                                                                       |
| .echo ON\|OFF         | å¼€å¯æˆ–å…³é—­ echo å‘½ä»¤ã€‚                                                                                                                                                                                                                                    |
| .exit                 | é€€å‡º SQLite æç¤ºç¬¦ã€‚                                                                                                                                                                                                                                      |
| .explain ON\|OFF      | å¼€å¯æˆ–å…³é—­é€‚åˆäº EXPLAIN çš„è¾“å‡ºæ¨¡å¼ã€‚å¦‚æœæ²¡æœ‰å¸¦å‚æ•°ï¼Œåˆ™ä¸º EXPLAIN onï¼ŒåŠå¼€å¯ EXPLAINã€‚                                                                                                                                                                    |
| .header(s) ON\|OFF    | å¼€å¯æˆ–å…³é—­å¤´éƒ¨æ˜¾ç¤ºã€‚                                                                                                                                                                                                                                      |
| .help                 | æ˜¾ç¤ºæ¶ˆæ¯ã€‚                                                                                                                                                                                                                                                |
| .import FILE TABLE    | å¯¼å…¥æ¥è‡ª FILE æ–‡ä»¶çš„æ•°æ®åˆ° TABLE è¡¨ä¸­ã€‚                                                                                                                                                                                                                   |
| .indices ?TABLE?      | æ˜¾ç¤ºæ‰€æœ‰ç´¢å¼•çš„åç§°ã€‚å¦‚æœæŒ‡å®šäº† TABLE è¡¨ï¼Œåˆ™åªæ˜¾ç¤ºåŒ¹é… LIKE æ¨¡å¼çš„ TABLE è¡¨çš„ç´¢å¼•ã€‚                                                                                                                                                                        |
| .load FILE ?ENTRY?    | åŠ è½½ä¸€ä¸ªæ‰©å±•åº“ã€‚                                                                                                                                                                                                                                          |
| .log FILE\|off        | å¼€å¯æˆ–å…³é—­æ—¥å¿—ã€‚FILE æ–‡ä»¶å¯ä»¥æ˜¯ stderrï¼ˆæ ‡å‡†é”™è¯¯ï¼‰/stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ã€‚                                                                                                                                                                                   |
| .mode MODE            | è®¾ç½®è¾“å‡ºæ¨¡å¼ï¼ŒMODE å¯ä»¥æ˜¯ä¸‹åˆ—ä¹‹ä¸€ï¼š**csv** é€—å·åˆ†éš”çš„å€¼**column** å·¦å¯¹é½çš„åˆ—**html** HTML çš„ <table> ä»£ç **insert** TABLE è¡¨çš„ SQL æ’å…¥ï¼ˆinsertï¼‰è¯­å¥**line** æ¯è¡Œä¸€ä¸ªå€¼**list** ç”± .separator å­—ç¬¦ä¸²åˆ†éš”çš„å€¼**tabs** ç”± Tab åˆ†éš”çš„å€¼**tcl** TCL åˆ—è¡¨å…ƒç´  |
| .nullvalue STRING     | åœ¨ NULL å€¼çš„åœ°æ–¹è¾“å‡º STRING å­—ç¬¦ä¸²ã€‚                                                                                                                                                                                                                      |
| .output FILENAME      | å‘é€è¾“å‡ºåˆ° FILENAME æ–‡ä»¶ã€‚                                                                                                                                                                                                                                |
| .output stdout        | å‘é€è¾“å‡ºåˆ°å±å¹•ã€‚                                                                                                                                                                                                                                          |
| .print STRING...      | é€å­—åœ°è¾“å‡º STRING å­—ç¬¦ä¸²ã€‚                                                                                                                                                                                                                                |
| .prompt MAIN CONTINUE | æ›¿æ¢æ ‡å‡†æç¤ºç¬¦ã€‚                                                                                                                                                                                                                                          |
| .quit                 | é€€å‡º SQLite æç¤ºç¬¦ã€‚                                                                                                                                                                                                                                      |
| .read FILENAME        | æ‰§è¡Œ FILENAME æ–‡ä»¶ä¸­çš„ SQLã€‚                                                                                                                                                                                                                              |
| .schema ?TABLE?       | æ˜¾ç¤º CREATE è¯­å¥ã€‚å¦‚æœæŒ‡å®šäº† TABLE è¡¨ï¼Œåˆ™åªæ˜¾ç¤ºåŒ¹é… LIKE æ¨¡å¼çš„ TABLE è¡¨ã€‚                                                                                                                                                                                |
| .separator STRING     | æ”¹å˜è¾“å‡ºæ¨¡å¼å’Œ .import æ‰€ä½¿ç”¨çš„åˆ†éš”ç¬¦ã€‚                                                                                                                                                                                                                   |
| .show                 | æ˜¾ç¤ºå„ç§è®¾ç½®çš„å½“å‰å€¼ã€‚                                                                                                                                                                                                                                    |
| .stats ON\|OFF        | å¼€å¯æˆ–å…³é—­ç»Ÿè®¡ã€‚                                                                                                                                                                                                                                          |
| .tables ?PATTERN?     | åˆ—å‡ºåŒ¹é… LIKE æ¨¡å¼çš„è¡¨çš„åç§°ã€‚                                                                                                                                                                                                                            |
| .timeout MS           | å°è¯•æ‰“å¼€é”å®šçš„è¡¨ MS æ¯«ç§’ã€‚                                                                                                                                                                                                                                |
| .width NUM NUM        | ä¸º "column" æ¨¡å¼è®¾ç½®åˆ—å®½åº¦ã€‚                                                                                                                                                                                                                              |
| .timer ON\|OFF        | å¼€å¯æˆ–å…³é—­ CPU å®šæ—¶å™¨ã€‚                                                                                                                                                                                                                                   |

### å®æˆ˜

#### æ ¼å¼åŒ–è¾“å‡º

```
sqlite>.header on
sqlite>.mode column
sqlite>.timer on
sqlite>
```

#### è¾“å‡ºç»“æœåˆ°æ–‡ä»¶

```shell
sqlite> .mode list
sqlite> .separator |
sqlite> .output teyptest_file_1.txt
sqlite> select * from tbl1;
sqlite> .exit
$ cat test_file_1.txt
hello|10
goodbye|20
$
```

## JAVA Client

ï¼ˆ1ï¼‰åœ¨[å®˜æ–¹ä¸‹è½½åœ°å€](https://bitbucket.org/xerial/sqlite-jdbc/downloads)ä¸‹è½½ sqlite-jdbc-(VERSION).jar ï¼Œç„¶åå°† jar åŒ…æ”¾åœ¨é¡¹ç›®ä¸­çš„ classpathã€‚

ï¼ˆ2ï¼‰é€šè¿‡ API æ‰“å¼€ä¸€ä¸ª SQLite æ•°æ®åº“è¿æ¥ã€‚

æ‰§è¡Œæ–¹æ³•ï¼š

```shell
> javac Sample.java
> java -classpath ".;sqlite-jdbc-(VERSION).jar" Sample   # in Windows
or
> java -classpath ".:sqlite-jdbc-(VERSION).jar" Sample   # in Mac or Linux
name = leo
id = 1
name = yui
id = 2
```

ç¤ºä¾‹ï¼š

```java
public class Sample {
    public static void main(String[] args) {
        Connection connection = null;
        try {
            // åˆ›å»ºæ•°æ®åº“è¿æ¥
            connection = DriverManager.getConnection("jdbc:sqlite:sample.db");
            Statement statement = connection.createStatement();
            statement.setQueryTimeout(30);  // è®¾ç½® sql æ‰§è¡Œè¶…æ—¶æ—¶é—´ä¸º 30s

            statement.executeUpdate("drop table if exists person");
            statement.executeUpdate("create table person (id integer, name string)");
            statement.executeUpdate("insert into person values(1, 'leo')");
            statement.executeUpdate("insert into person values(2, 'yui')");
            ResultSet rs = statement.executeQuery("select * from person");
            while (rs.next()) {
                // è¯»å–ç»“æœé›†
                System.out.println("name = " + rs.getString("name"));
                System.out.println("id = " + rs.getInt("id"));
            }
        } catch (SQLException e) {
            // å¦‚æœé”™è¯¯ä¿¡æ¯æ˜¯ "out of memory"ï¼Œå¯èƒ½æ˜¯æ‰¾ä¸åˆ°æ•°æ®åº“æ–‡ä»¶
            System.err.println(e.getMessage());
        } finally {
            try {
                if (connection != null) {
                    connection.close();
                }
            } catch (SQLException e) {
                // å…³é—­è¿æ¥å¤±è´¥
                System.err.println(e.getMessage());
            }
        }
    }
}
```

### å¦‚ä½•æŒ‡å®šæ•°æ®åº“æ–‡ä»¶

Windows

```properties
Connection connection = DriverManager.getConnection("jdbc:sqlite:C:/work/mydatabase.db");
```

Unix (Linux, Mac OS X, etc)

```properties
Connection connection = DriverManager.getConnection("jdbc:sqlite:/home/leo/work/mydatabase.db");
```

### å¦‚ä½•ä½¿ç”¨å†…å­˜æ•°æ®åº“

```properties
Connection connection = DriverManager.getConnection("jdbc:sqlite::memory:");
```

## å‚è€ƒèµ„æ–™

- [SQLite å®˜ç½‘](https://www.sqlite.org/index.html)
- [SQLite å®˜æ–¹æ–‡æ¡£](https://www.sqlite.org/docs.html)
- [SQLite å®˜æ–¹å‘½ä»¤è¡Œæ‰‹å†Œ](https://www.sqlite.org/cli.html)
- http://www.runoob.com/sqlite/sqlite-commands.html
- https://github.com/xerial/sqlite-jdbc
- http://www.runoob.com/sqlite/sqlite-java.html

## :door: ä¼ é€é—¨

| [æˆ‘çš„ Github åšå®¢](https://github.com/dunwu/blog) | [db-tutorial é¦–é¡µ](https://github.com/dunwu/db-tutorial) |
