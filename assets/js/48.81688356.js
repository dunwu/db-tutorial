(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{387:function(v,_,t){"use strict";t.r(_);var e=t(4),a=Object(e.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"redis-å¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#redis-å¤åˆ¶"}},[v._v("#")]),v._v(" Redis å¤åˆ¶")]),v._v(" "),_("blockquote",[_("p",[v._v("åœ¨ Redis ä¸­ï¼Œ"),_("strong",[v._v("å¯ä»¥é€šè¿‡æ‰§è¡Œ "),_("code",[v._v("SLAVEOF")]),v._v(" å‘½ä»¤æˆ–è®¾ç½® "),_("code",[v._v("slaveof")]),v._v(" é€‰é¡¹ï¼Œè®©ä¸€ä¸ªæœåŠ¡å™¨å»å¤åˆ¶ï¼ˆreplicateï¼‰å¦ä¸€ä¸ªæœåŠ¡å™¨")]),v._v("ï¼Œå…¶ä¸­ï¼Œåè€…å«ä¸»æœåŠ¡å™¨ï¼ˆmasterï¼‰ï¼Œå‰è€…å«ä»æœåŠ¡å™¨ï¼ˆslaveï¼‰ã€‚")]),v._v(" "),_("p",[v._v("Redis 2.8 ä»¥å‰çš„å¤åˆ¶ä¸èƒ½é«˜æ•ˆå¤„ç†æ–­çº¿åé‡å¤åˆ¶çš„æƒ…å†µï¼Œè€Œ Redis 2.8 æ–°æ·»çš„éƒ¨åˆ†é‡åŒæ­¥å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚")])]),v._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/20200712182603.png",alt:"img"}})]),v._v(" "),_("h2",{attrs:{id:"ä¸€ã€å¤åˆ¶ç®€ä»‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€å¤åˆ¶ç®€ä»‹"}},[v._v("#")]),v._v(" ä¸€ã€å¤åˆ¶ç®€ä»‹")]),v._v(" "),_("p",[v._v("Redis é€šè¿‡ "),_("code",[v._v("slaveof host port")]),v._v(" å‘½ä»¤æ¥è®©ä¸€ä¸ªæœåŠ¡å™¨æˆä¸ºå¦ä¸€ä¸ªæœåŠ¡å™¨çš„ä»æœåŠ¡å™¨ã€‚")]),v._v(" "),_("p",[_("strong",[v._v("ä¸€ä¸ªä¸»æœåŠ¡å™¨å¯ä»¥æœ‰å¤šä¸ªä»æœåŠ¡å™¨")]),v._v("ã€‚ä¸ä»…ä¸»æœåŠ¡å™¨å¯ä»¥æœ‰ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„ä»æœåŠ¡å™¨ï¼Œ å¤šä¸ªä»æœåŠ¡å™¨ä¹‹é—´å¯ä»¥æ„æˆä¸€ä¸ªä¸»ä»é“¾ã€‚")]),v._v(" "),_("p",[_("strong",[v._v("ä¸€ä¸ªä»æœåŠ¡å™¨åªèƒ½æœ‰ä¸€ä¸ªä¸»æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¸æ”¯æŒä¸»ä¸»å¤åˆ¶")]),v._v("ã€‚")]),v._v(" "),_("p",[v._v("å¯ä»¥é€šè¿‡å¤åˆ¶åŠŸèƒ½æ¥è®©ä¸»æœåŠ¡å™¨å…äºæ‰§è¡ŒæŒä¹…åŒ–æ“ä½œï¼š åªè¦å…³é—­ä¸»æœåŠ¡å™¨çš„æŒä¹…åŒ–åŠŸèƒ½ï¼Œ ç„¶åç”±ä»æœåŠ¡å™¨å»æ‰§è¡ŒæŒä¹…åŒ–æ“ä½œå³å¯ã€‚")]),v._v(" "),_("p",[v._v("åœ¨ä½¿ç”¨ Redis å¤åˆ¶åŠŸèƒ½æ—¶çš„è®¾ç½®ä¸­ï¼Œå¼ºçƒˆå»ºè®®åœ¨ master å’Œåœ¨ slave ä¸­å¯ç”¨æŒä¹…åŒ–ã€‚å½“ä¸å¯ç”¨æ—¶ï¼Œä¾‹å¦‚ç”±äºéå¸¸æ…¢çš„ç£ç›˜æ€§èƒ½è€Œå¯¼è‡´çš„å»¶è¿Ÿé—®é¢˜ï¼Œ"),_("strong",[v._v("åº”è¯¥é…ç½®å®ä¾‹æ¥é¿å…é‡ç½®åè‡ªåŠ¨é‡å¯")]),v._v("ã€‚")]),v._v(" "),_("p",[v._v("ä» Redis 2.6 å¼€å§‹ï¼Œ ä»æœåŠ¡å™¨æ”¯æŒåªè¯»æ¨¡å¼ï¼Œ å¹¶ä¸”è¯¥æ¨¡å¼ä¸ºä»æœåŠ¡å™¨çš„é»˜è®¤æ¨¡å¼ã€‚")]),v._v(" "),_("ul",[_("li",[v._v("åªè¯»æ¨¡å¼ç”± "),_("code",[v._v("redis.conf")]),v._v(" æ–‡ä»¶ä¸­çš„ "),_("code",[v._v("slave-read-only")]),v._v(" é€‰é¡¹æ§åˆ¶ï¼Œ ä¹Ÿå¯ä»¥é€šè¿‡ "),_("a",{attrs:{href:"http://redisdoc.com/configure/config_set.html#config-set",target:"_blank",rel:"noopener noreferrer"}},[v._v("CONFIG SET parameter value"),_("OutboundLink")],1),v._v(" å‘½ä»¤æ¥å¼€å¯æˆ–å…³é—­è¿™ä¸ªæ¨¡å¼ã€‚")]),v._v(" "),_("li",[v._v("åªè¯»ä»æœåŠ¡å™¨ä¼šæ‹’ç»æ‰§è¡Œä»»ä½•å†™å‘½ä»¤ï¼Œ æ‰€ä»¥ä¸ä¼šå‡ºç°å› ä¸ºæ“ä½œå¤±è¯¯è€Œå°†æ•°æ®ä¸å°å¿ƒå†™å…¥åˆ°äº†ä»æœåŠ¡å™¨çš„æƒ…å†µã€‚")])]),v._v(" "),_("h2",{attrs:{id:"äºŒã€æ—§ç‰ˆå¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€æ—§ç‰ˆå¤åˆ¶"}},[v._v("#")]),v._v(" äºŒã€æ—§ç‰ˆå¤åˆ¶")]),v._v(" "),_("blockquote",[_("p",[v._v("Redis 2.8 ç‰ˆæœ¬ä»¥å‰å®ç°æ–¹å¼ï¼š"),_("code",[v._v("SYNC")]),v._v(" å‘½ä»¤")])]),v._v(" "),_("p",[v._v("Redis çš„å¤åˆ¶åŠŸèƒ½åˆ†ä¸ºåŒæ­¥ï¼ˆsyncï¼‰å’Œå‘½ä»¤ä¼ æ’­ï¼ˆcommand propagateï¼‰ä¸¤ä¸ªæ“ä½œï¼š")]),v._v(" "),_("ul",[_("li",[_("strong",[_("code",[v._v("åŒæ­¥ï¼ˆsyncï¼‰")])]),v._v(" - ç”¨äºå°†ä»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€æ›´æ–°è‡³ä¸»æœåŠ¡å™¨å½“å‰çš„æ•°æ®åº“çŠ¶æ€ã€‚")]),v._v(" "),_("li",[_("strong",[_("code",[v._v("å‘½ä»¤ä¼ æ’­ï¼ˆcommand propagateï¼‰")])]),v._v(" - å½“ä¸»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€è¢«ä¿®æ”¹ï¼Œå¯¼è‡´ä¸»ä»æ•°æ®åº“çŠ¶æ€ä¸ä¸€è‡´æ—¶ï¼Œè®©ä¸»ä»æœåŠ¡å™¨çš„æ•°æ®åº“é‡æ–°å›åˆ°ä¸€è‡´çŠ¶æ€ã€‚")])]),v._v(" "),_("h3",{attrs:{id:"åŒæ­¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#åŒæ­¥"}},[v._v("#")]),v._v(" åŒæ­¥")]),v._v(" "),_("p",[_("code",[v._v("SYNC")]),v._v(" å‘½ä»¤çš„æ‰§è¡Œæ­¥éª¤ï¼š")]),v._v(" "),_("ol",[_("li",[v._v("ä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€ "),_("code",[v._v("SYNC")]),v._v(" å‘½ä»¤ã€‚")]),v._v(" "),_("li",[v._v("æ”¶åˆ° "),_("code",[v._v("SYNC")]),v._v(" å‘½ä»¤çš„ä¸»æœåŠ¡å™¨æ‰§è¡Œ "),_("code",[v._v("BGSAVE")]),v._v(" å‘½ä»¤ï¼Œåœ¨åå°ç”Ÿæˆä¸€ä¸ª RDB æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªç¼“å†²åŒºè®°å½•ä»ç°åœ¨å¼€å§‹æ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ã€‚")]),v._v(" "),_("li",[v._v("ä¸»æœåŠ¡å™¨æ‰§è¡Œ "),_("code",[v._v("BGSAVE")]),v._v(" å®Œæ¯•åï¼Œä¸»æœåŠ¡å™¨ä¼šå°†ç”Ÿæˆçš„ RDB æ–‡ä»¶å‘é€ç»™ä»æœåŠ¡å™¨ã€‚ä»æœåŠ¡å™¨æ¥æ”¶å¹¶è½½å…¥ RDB æ–‡ä»¶ï¼Œæ›´æ–°è‡ªå·±çš„æ•°æ®åº“çŠ¶æ€ã€‚")]),v._v(" "),_("li",[v._v("ä¸»æœåŠ¡å™¨å°†è®°å½•åœ¨ç¼“å†²åŒºä¸­çš„æ‰€æœ‰å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‰§è¡Œè¿™äº›å†™å‘½ä»¤ï¼Œæ›´æ–°è‡ªå·±çš„æ•°æ®åº“çŠ¶æ€ã€‚")])]),v._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/master/snap/20200224220353.png",alt:"img"}})]),v._v(" "),_("h3",{attrs:{id:"å‘½ä»¤ä¼ æ’­"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å‘½ä»¤ä¼ æ’­"}},[v._v("#")]),v._v(" å‘½ä»¤ä¼ æ’­")]),v._v(" "),_("p",[v._v("åŒæ­¥æ“ä½œå®Œæˆåï¼Œä¸»ä»æ•°æ®åº“çš„æ•°æ®åº“çŠ¶æ€å°†è¾¾åˆ°ä¸€è‡´ã€‚æ¯å½“ä¸»æœåŠ¡å™¨æ‰§è¡Œå®¢æˆ·ç«¯å‘é€çš„å†™å‘½ä»¤æ—¶ï¼Œä¸»ä»æ•°æ®åº“çŠ¶æ€ä¸å†ä¸€è‡´ã€‚éœ€è¦å°†å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨æ‰§è¡Œï¼Œä½¿å¾—äºŒè€…çš„æ•°æ®åº“çŠ¶æ€é‡æ–°è¾¾åˆ°ä¸€è‡´ã€‚")]),v._v(" "),_("h3",{attrs:{id:"æ—§ç‰ˆå¤åˆ¶çš„ç¼ºé™·"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ—§ç‰ˆå¤åˆ¶çš„ç¼ºé™·"}},[v._v("#")]),v._v(" æ—§ç‰ˆå¤åˆ¶çš„ç¼ºé™·")]),v._v(" "),_("p",[v._v("ä»æœåŠ¡å™¨å¯¹ä¸»æœåŠ¡å™¨çš„å¤åˆ¶å­˜åœ¨ä¸¤ç§æƒ…å†µï¼š")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("åˆæ¬¡å¤åˆ¶")]),v._v(" - ä»æœåŠ¡å™¨ä»¥å‰æ²¡æœ‰å¤åˆ¶è¿‡å°†è¦å¤åˆ¶çš„ä¸»æœåŠ¡å™¨ã€‚")]),v._v(" "),_("li",[_("strong",[v._v("æ–­çº¿åé‡å¤åˆ¶")]),v._v(" - å¤„äºå‘½ä»¤ä¼ æ’­é˜¶æ®µçš„ä¸»ä»æœåŠ¡å™¨å› ä¸ºç½‘ç»œåŸå› è€Œä¸­æ–­äº†å¤åˆ¶ï¼Œå½“ä»æœåŠ¡å™¨é€šè¿‡è‡ªåŠ¨é‡è¿é‡æ–°è¿ä¸Šäº†ä¸»æœåŠ¡å™¨åï¼Œç»§ç»­å¤åˆ¶ä¸»æœåŠ¡å™¨ã€‚")])]),v._v(" "),_("p",[v._v("å¯¹äºåˆæ¬¡å¤åˆ¶ï¼Œæ—§ç‰ˆå¤åˆ¶åŠŸèƒ½å¯ç”¨å¾ˆå¥½å®Œæˆä»»åŠ¡ï¼›ä½†æ˜¯"),_("strong",[v._v("å¯¹äºæ–­çº¿åé‡å¤åˆ¶ï¼Œç”±äºæ¯æ¬¡ä»»ç„¶éœ€è¦ç”Ÿæˆ RDB å¹¶ä¼ è¾“ï¼Œæ•ˆç‡å¾ˆä½")]),v._v("ã€‚")]),v._v(" "),_("blockquote",[_("p",[v._v("ğŸ”” æ³¨æ„ï¼š"),_("strong",[v._v("SYNC å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸è€—è´¹èµ„æºçš„æ“ä½œã€‚")])]),v._v(" "),_("ul",[_("li",[v._v("ä¸»æœåŠ¡å™¨æ‰§è¡Œ "),_("code",[v._v("BGSAVE")]),v._v(" å‘½ä»¤ç”Ÿæˆ RDB æ–‡ä»¶ï¼Œè¿™ä¸ªæ“ä½œä¼šè€—è´¹ä¸»æœåŠ¡å™¨å¤§é‡çš„ CPUã€å†…å­˜å’Œç£ç›˜ I/O èµ„æºã€‚")]),v._v(" "),_("li",[v._v("ä¸»æœåŠ¡å™¨ä¼ è¾“ RDB æ–‡ä»¶ç»™ä»æœåŠ¡å™¨ï¼Œè¿™ä¸ªæ“ä½œä¼šè€—è´¹ä¸»ä»æœåŠ¡å™¨å¤§é‡çš„ç½‘ç»œèµ„æºï¼Œå¹¶å¯¹ä¸»æœåŠ¡å™¨å“åº”æ—¶å»¶äº§ç”Ÿå½±å“ã€‚")]),v._v(" "),_("li",[v._v("ä»æœåŠ¡å™¨è½½å…¥ RDB æ–‡ä»¶æœŸé—´ï¼Œä¼šé˜»å¡å…¶ä»–å‘½ä»¤è¯·æ±‚ã€‚")])])]),v._v(" "),_("h2",{attrs:{id:"ä¸‰ã€æ–°ç‰ˆå¤åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€æ–°ç‰ˆå¤åˆ¶"}},[v._v("#")]),v._v(" ä¸‰ã€æ–°ç‰ˆå¤åˆ¶")]),v._v(" "),_("blockquote",[_("p",[v._v("Redis 2.8 ç‰ˆæœ¬ä»¥åçš„æ–°å®ç°æ–¹å¼ï¼šä½¿ç”¨ "),_("code",[v._v("PSYNC")]),v._v(" å‘½ä»¤æ›¿ä»£ "),_("code",[v._v("SYNC")]),v._v(" å‘½ä»¤ã€‚")])]),v._v(" "),_("p",[_("code",[v._v("PSYNC")]),v._v(" å‘½ä»¤å…·æœ‰å®Œæ•´é‡åŒæ­¥å’Œéƒ¨åˆ†é‡åŒæ­¥ä¸¤ç§æ¨¡å¼ï¼š")]),v._v(" "),_("ul",[_("li",[_("strong",[_("code",[v._v("å®Œæ•´é‡åŒæ­¥ï¼ˆfull resychronizationï¼‰")])]),v._v(" - ç”¨äºåˆæ¬¡å¤åˆ¶ã€‚æ‰§è¡Œæ­¥éª¤ä¸ "),_("code",[v._v("SYNC")]),v._v(" å‘½ä»¤åŸºæœ¬ä¸€è‡´ã€‚")]),v._v(" "),_("li",[_("strong",[_("code",[v._v("éƒ¨åˆ†é‡åŒæ­¥ï¼ˆpartial resychronizationï¼‰")])]),v._v(" - ç”¨äºæ–­çº¿åé‡å¤åˆ¶ã€‚"),_("strong",[v._v("å¦‚æœæ¡ä»¶å…è®¸ï¼Œä¸»æœåŠ¡å™¨å¯ä»¥å°†ä¸»ä»æœåŠ¡å™¨è¿æ¥æ–­å¼€æœŸé—´æ‰§è¡Œçš„å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨")]),v._v("ï¼Œä»æœåŠ¡å™¨åªéœ€æ¥æ”¶å¹¶æ‰§è¡Œè¿™äº›å†™å‘½ä»¤ï¼Œå³å¯å°†ä¸»ä»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€ä¿æŒä¸€è‡´ã€‚")])]),v._v(" "),_("h3",{attrs:{id:"éƒ¨åˆ†é‡åŒæ­¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#éƒ¨åˆ†é‡åŒæ­¥"}},[v._v("#")]),v._v(" éƒ¨åˆ†é‡åŒæ­¥")]),v._v(" "),_("p",[v._v("éƒ¨åˆ†é‡åŒæ­¥åŠŸèƒ½å®ç°ç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆï¼š")]),v._v(" "),_("ul",[_("li",[v._v("ä¸»ä»æœåŠ¡å™¨çš„"),_("strong",[v._v("å¤åˆ¶åç§»é‡ï¼ˆreplication offsetï¼‰")])]),v._v(" "),_("li",[v._v("ä¸»æœåŠ¡å™¨çš„"),_("strong",[v._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼ˆreplication backlogï¼‰")])]),v._v(" "),_("li",[_("strong",[v._v("æœåŠ¡å™¨çš„è¿è¡Œ ID")])])]),v._v(" "),_("h4",{attrs:{id:"å¤åˆ¶åç§»é‡"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å¤åˆ¶åç§»é‡"}},[v._v("#")]),v._v(" å¤åˆ¶åç§»é‡")]),v._v(" "),_("p",[v._v("ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨ä¼šåˆ†åˆ«ç»´æŠ¤ä¸€ä¸ªå¤åˆ¶åç§»é‡ã€‚")]),v._v(" "),_("ul",[_("li",[v._v("å¦‚æœä¸»ä»æœåŠ¡å™¨çš„å¤åˆ¶åç§»é‡ç›¸åŒï¼Œåˆ™è¯´æ˜äºŒè€…çš„æ•°æ®åº“çŠ¶æ€ä¸€è‡´ï¼›")]),v._v(" "),_("li",[v._v("åä¹‹ï¼Œåˆ™è¯´æ˜äºŒè€…çš„æ•°æ®åº“çŠ¶æ€ä¸ä¸€è‡´ã€‚")])]),v._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/master/cs/database/redis/redis-replication-offset.png",alt:"img"}})]),v._v(" "),_("h4",{attrs:{id:"å¤åˆ¶ç§¯å‹ç¼“å†²åŒº"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å¤åˆ¶ç§¯å‹ç¼“å†²åŒº"}},[v._v("#")]),v._v(" å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")]),v._v(" "),_("p",[_("strong",[v._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒºæ˜¯ä¸»æœåŠ¡å™¨ç»´æŠ¤çš„ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰é˜Ÿåˆ—")]),v._v("ï¼Œé»˜è®¤å¤§å°ä¸º "),_("code",[v._v("1MB")]),v._v("ã€‚")]),v._v(" "),_("p",[v._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒºä¼šä¿å­˜ä¸€éƒ¨åˆ†æœ€è¿‘ä¼ æ’­çš„å†™å‘½ä»¤ï¼Œå¹¶ä¸”å¤åˆ¶ç§¯å‹ç¼“å†²åŒºä¼šä¸ºé˜Ÿåˆ—ä¸­çš„æ¯ä¸ªå­—èŠ‚è®°å½•ç›¸åº”çš„å¤åˆ¶åç§»é‡ã€‚")]),v._v(" "),_("p",[v._v("å½“ä»æœåŠ¡å™¨æ–­çº¿é‡è¿ä¸»æœåŠ¡æ—¶ï¼Œä»æœåŠ¡å™¨ä¼šé€šè¿‡ "),_("code",[v._v("PSYNC")]),v._v(" å‘½ä»¤å°†è‡ªå·±çš„å¤åˆ¶åç§»é‡ offset å‘é€ç»™ä¸»æœåŠ¡å™¨ï¼Œä¸»æœåŠ¡å™¨ä¼šæ ¹æ®è¿™ä¸ªå¤åˆ¶åç§»é‡æ¥å†³å®šå¯¹ä»æœåŠ¡å™¨æ‰§è¡Œä½•ç§åŒæ­¥æ“ä½œã€‚")]),v._v(" "),_("ul",[_("li",[v._v("å¦‚æœ offset ä¹‹åçš„æ•°æ®ä»ç„¶åœ¨å¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼Œåˆ™ä¸»æœåŠ¡å™¨å¯¹ä»æœåŠ¡å™¨æ‰§è¡Œéƒ¨åˆ†é‡åŒæ­¥æ“ä½œã€‚")]),v._v(" "),_("li",[v._v("åä¹‹ï¼Œåˆ™ä¸»æœåŠ¡å™¨å¯¹ä»æœåŠ¡å™¨æ‰§è¡Œå®Œæ•´é‡åŒæ­¥æ“ä½œã€‚")])]),v._v(" "),_("blockquote",[_("p",[v._v("ğŸ”” æ³¨æ„ï¼š"),_("strong",[v._v("åˆç†è°ƒæ•´å¤åˆ¶ç§¯å‹ç¼“å†²åŒºçš„å¤§å°")])]),v._v(" "),_("ul",[_("li",[_("p",[v._v("Redis å¤åˆ¶ç§¯å‹ç¼“å†²åŒºé»˜è®¤å¤§å°ä¸º "),_("code",[v._v("1MB")]),v._v("ã€‚")])]),v._v(" "),_("li",[_("p",[v._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒºçš„æœ€å°å¤§å°å¯ä»¥æ ¹æ®å…¬å¼ "),_("code",[v._v("second * write_size_per_second")]),v._v(" ä¼°ç®—ã€‚")])])])]),v._v(" "),_("h4",{attrs:{id:"æœåŠ¡å™¨çš„è¿è¡Œ-id"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡å™¨çš„è¿è¡Œ-id"}},[v._v("#")]),v._v(" æœåŠ¡å™¨çš„è¿è¡Œ ID")]),v._v(" "),_("ul",[_("li",[v._v("æ¯ä¸ª Redis æœåŠ¡å™¨ï¼Œéƒ½æœ‰è¿è¡Œ IDï¼Œç”¨äºå”¯ä¸€è¯†åˆ«èº«ä»½ã€‚")]),v._v(" "),_("li",[v._v("è¿è¡Œ ID åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œç”± 40 ä¸ªéšæœºçš„åå…­è¿›åˆ¶å­—ç¬¦ç»„æˆã€‚ä¾‹å¦‚ï¼š132e358005e29741f8d7b0a42d666aace286edda")])]),v._v(" "),_("p",[v._v("ä»æœåŠ¡å™¨å¯¹ä¸»æœåŠ¡å™¨è¿›è¡Œåˆæ¬¡å¤åˆ¶æ—¶ï¼Œä¸»æœåŠ¡å™¨ä¼šå°†è‡ªå·±çš„è¿è¡Œ ID ä¼ é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨ä¼šå°†è¿™ä¸ªè¿è¡Œ ID ä¿å­˜ä¸‹æ¥ã€‚")]),v._v(" "),_("p",[v._v("å½“ä»æœåŠ¡å™¨æ–­çº¿é‡è¿ä¸€ä¸ªä¸»æœåŠ¡å™¨æ—¶ï¼Œä»æœåŠ¡å™¨ä¼šå‘é€ä¹‹å‰ä¿å­˜çš„è¿è¡Œ IDï¼š")]),v._v(" "),_("ul",[_("li",[v._v("å¦‚æœä¿å­˜çš„è¿è¡Œ ID å’Œå½“å‰ä¸»æœåŠ¡å™¨çš„è¿è¡Œ ID ä¸€è‡´ï¼Œåˆ™è¯´æ˜ä»æœåŠ¡å™¨æ–­çº¿ä¹‹å‰è¿æ¥çš„å°±æ˜¯è¿™ä¸ªä¸»æœåŠ¡å™¨ï¼Œä¸»æœåŠ¡å™¨å¯ä»¥ç»§ç»­å°è¯•æ‰§è¡Œéƒ¨åˆ†é‡åŒæ­¥æ“ä½œï¼›")]),v._v(" "),_("li",[v._v("åä¹‹ï¼Œè‹¥è¿è¡Œ ID ä¸ä¸€è‡´ï¼Œåˆ™è¯´æ˜ä»æœåŠ¡å™¨æ–­çº¿ä¹‹å‰è¿æ¥çš„ä¸æ˜¯è¿™ä¸ªä¸»æœåŠ¡å™¨ï¼Œä¸»æœåŠ¡å™¨å°†å¯¹ä»æœåŠ¡å™¨æ‰§è¡Œå®Œæ•´é‡åŒæ­¥æ“ä½œã€‚")])]),v._v(" "),_("h3",{attrs:{id:"psync-å‘½ä»¤"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#psync-å‘½ä»¤"}},[v._v("#")]),v._v(" PSYNC å‘½ä»¤")]),v._v(" "),_("p",[v._v("äº†è§£äº†éƒ¨åˆ†é‡åŒæ­¥çš„å®ç°ï¼ŒPSYNC çš„å®ç°å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼Œå®ƒçš„åŸºæœ¬å·¥ä½œåŸç†å¤§è‡´å¦‚ä¸‹ï¼š")]),v._v(" "),_("p",[v._v("å½“ä»æœåŠ¡æ¥æ”¶åˆ° "),_("code",[v._v("SLAVEOF")]),v._v(" å‘½ä»¤æ—¶ï¼Œå…ˆåˆ¤æ–­ä»æœåŠ¡å™¨ä»¥å‰æ˜¯å¦æ‰§è¡Œè¿‡å¤åˆ¶æ“ä½œã€‚")]),v._v(" "),_("ul",[_("li",[v._v("å¦‚æœæ²¡æœ‰å¤åˆ¶è¿‡ä»»ä½•ä¸»æœåŠ¡å™¨ï¼Œå‘è¦å¤åˆ¶çš„ä¸»æœåŠ¡å™¨"),_("strong",[v._v("å‘é€ "),_("code",[v._v("PSYNC ? -1")]),v._v(" å‘½ä»¤ï¼Œä¸»åŠ¨è¯·æ±‚è¿›è¡Œå®Œæ•´é‡åŒæ­¥")]),v._v("ã€‚")]),v._v(" "),_("li",[v._v("åä¹‹ï¼Œå‘è¦å¤åˆ¶çš„ä¸»æœåŠ¡å™¨å‘é€ "),_("code",[v._v("PSYNC <runid> <offset>")]),v._v(" å‘½ä»¤ã€‚\n"),_("ul",[_("li",[_("code",[v._v("runid")]),v._v(" æ˜¯ä¸Šä¸€æ¬¡å¤åˆ¶çš„ä¸»æœåŠ¡å™¨çš„è¿è¡Œ IDã€‚")]),v._v(" "),_("li",[_("code",[v._v("offset")]),v._v(" æ˜¯å¤åˆ¶åç§»é‡ã€‚")])])])]),v._v(" "),_("p",[v._v("æ¥æ”¶åˆ° "),_("code",[v._v("PSYNC <runid> <offset>")]),v._v(" å‘½ä»¤çš„ä¸»æœåŠ¡ä¼šè¿›è¡Œåˆ†æï¼š")]),v._v(" "),_("ul",[_("li",[v._v("å‡å¦‚ä¸»ä»æœåŠ¡å™¨çš„ "),_("strong",[v._v("master run id ç›¸åŒ")]),v._v("ï¼Œå¹¶ä¸”"),_("strong",[v._v("æŒ‡å®šçš„åç§»é‡ï¼ˆoffsetï¼‰åœ¨å†…å­˜ç¼“å†²åŒºä¸­è¿˜æœ‰æ•ˆ")]),v._v("ï¼Œå¤åˆ¶å°±ä¼šä»ä¸Šæ¬¡ä¸­æ–­çš„ç‚¹å¼€å§‹ç»§ç»­ã€‚")]),v._v(" "),_("li",[v._v("å¦‚æœå…¶ä¸­ä¸€ä¸ªæ¡ä»¶ä¸æ»¡è¶³ï¼Œå°±ä¼šè¿›è¡Œå®Œå…¨é‡æ–°åŒæ­¥ï¼ˆåœ¨ 2.8 ç‰ˆæœ¬ä¹‹å‰å°±æ˜¯ç›´æ¥è¿›è¡Œå®Œå…¨é‡æ–°åŒæ­¥ï¼‰ã€‚")])]),v._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/master/cs/database/redis/redis-psync-workflow.png",alt:"img"}})]),v._v(" "),_("h2",{attrs:{id:"å››ã€å¿ƒè·³æ£€æµ‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€å¿ƒè·³æ£€æµ‹"}},[v._v("#")]),v._v(" å››ã€å¿ƒè·³æ£€æµ‹")]),v._v(" "),_("p",[v._v("åœ¨"),_("strong",[v._v("å‘½ä»¤ä¼ æ’­")]),v._v("é˜¶æ®µï¼Œä»æœåŠ¡å™¨é»˜è®¤ä¼šä»¥"),_("strong",[v._v("æ¯ç§’ä¸€æ¬¡")]),v._v("çš„é¢‘ç‡ï¼Œå‘ä¸»æœåŠ¡å™¨å‘é€å‘½ä»¤ï¼š")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("REPLCONF ACK <replication_offset>\n")])])]),_("p",[v._v("å…¶ä¸­ï¼Œ"),_("code",[v._v("replication_offset")]),v._v(" æ˜¯ä»æœåŠ¡å™¨å½“å‰çš„å¤åˆ¶åç§»é‡ã€‚")]),v._v(" "),_("p",[v._v("å‘é€ "),_("code",[v._v("REPLCONF ACK")]),v._v(" å‘½ä»¤å¯¹äºä¸»ä»æœåŠ¡å™¨æœ‰ä¸‰ä¸ªä½œç”¨ï¼š")]),v._v(" "),_("ul",[_("li",[v._v("æ£€æµ‹ä¸»ä»æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥çŠ¶æ€ã€‚")]),v._v(" "),_("li",[v._v("è¾…åŠ©å®ç° min-slaves é€‰é¡¹ã€‚")]),v._v(" "),_("li",[v._v("æ£€æµ‹å‘½ä»¤ä¸¢å¤±ã€‚")])]),v._v(" "),_("h3",{attrs:{id:"æ£€æµ‹ä¸»ä»è¿æ¥çŠ¶æ€"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æµ‹ä¸»ä»è¿æ¥çŠ¶æ€"}},[v._v("#")]),v._v(" æ£€æµ‹ä¸»ä»è¿æ¥çŠ¶æ€")]),v._v(" "),_("p",[_("strong",[v._v("å¯ä»¥é€šè¿‡å‘é€å’Œæ¥æ”¶ "),_("code",[v._v("REPLCONF ACK")]),v._v(" å‘½ä»¤æ¥æ£€æŸ¥ä¸»ä»æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè¿æ¥")]),v._v("æ˜¯å¦æ­£å¸¸ï¼šå¦‚æœä¸»æœåŠ¡å™¨è¶…è¿‡ä¸€ç§’æ²¡æœ‰æ”¶åˆ°ä»æœåŠ¡å™¨å‘æ¥çš„ "),_("code",[v._v("REPLCONF ACK")]),v._v(" å‘½ä»¤ï¼Œé‚£ä¹ˆä¸»æœåŠ¡å™¨å°±çŸ¥é“ä¸»ä»æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥å‡ºç°é—®é¢˜äº†ã€‚")]),v._v(" "),_("p",[v._v("å¯ä»¥é€šè¿‡å‘ä¸»æœåŠ¡å™¨å‘é€ "),_("code",[v._v("INFO replication")]),v._v(" å‘½ä»¤ï¼Œåœ¨åˆ—å‡ºçš„ä»æœåŠ¡å™¨åˆ—è¡¨çš„ lag ä¸€æ ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€ "),_("code",[v._v("REPLCONF ACK")]),v._v(" å‘½ä»¤å·²ç»è¿‡å»å¤šå°‘ç§’ã€‚")]),v._v(" "),_("h3",{attrs:{id:"è¾…åŠ©å®ç°-min-slaves-é€‰é¡¹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#è¾…åŠ©å®ç°-min-slaves-é€‰é¡¹"}},[v._v("#")]),v._v(" è¾…åŠ©å®ç° min-slaves é€‰é¡¹")]),v._v(" "),_("p",[v._v("Redis çš„ "),_("strong",[_("code",[v._v("min-slaves-to-write")]),v._v(" å’Œ "),_("code",[v._v("min-slaves-max-lag")]),v._v(" ä¸¤ä¸ªé€‰é¡¹å¯ä»¥é˜²æ­¢ä¸»æœåŠ¡å™¨åœ¨ä¸å®‰å…¨çš„æƒ…å†µä¸‹æ‰§è¡Œå†™å‘½ä»¤")]),v._v("ã€‚")]),v._v(" "),_("p",[v._v("ã€ç¤ºä¾‹ã€‘min-slaves é…ç½®é¡¹")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("min-slaves-to-write 3\nmin-slaves-max-lag 10\n")])])]),_("p",[v._v("ä»¥ä¸Šé…ç½®è¡¨ç¤ºï¼šä»æœåŠ¡å™¨å°äº 3 ä¸ªï¼Œæˆ–ä¸‰ä¸ªä»æœåŠ¡å™¨çš„å»¶è¿Ÿï¼ˆlagï¼‰éƒ½å¤§äºç­‰äº 10 ç§’æ—¶ï¼Œä¸»æœåŠ¡å™¨å°†æ‹’ç»æ‰§è¡Œå†™å‘½ä»¤ã€‚")]),v._v(" "),_("h3",{attrs:{id:"æ£€æµ‹å‘½ä»¤ä¸¢å¤±"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æµ‹å‘½ä»¤ä¸¢å¤±"}},[v._v("#")]),v._v(" æ£€æµ‹å‘½ä»¤ä¸¢å¤±")]),v._v(" "),_("p",[v._v("å¦‚æœå› ä¸ºç½‘ç»œæ•…éšœï¼Œä¸»æœåŠ¡ä¼ æ’­ç»™ä»æœåŠ¡å™¨çš„å†™å‘½ä»¤ä¸¢å¤±ï¼Œé‚£ä¹ˆä»æœåŠ¡å™¨å®šæ—¶å‘ä¸»æœåŠ¡å™¨å‘é€ "),_("code",[v._v("REPLCONF ACK")]),v._v(" å‘½ä»¤æ—¶ï¼Œä¸»æœåŠ¡å™¨å°†å‘è§‰ä»æœåŠ¡å™¨çš„å¤åˆ¶åç§»é‡å°‘äºè‡ªå·±çš„ã€‚ç„¶åï¼Œä¸»æœåŠ¡å™¨å°±ä¼šæ ¹æ®ä»æœåŠ¡å™¨æäº¤çš„å¤åˆ¶åç§»é‡ï¼Œåœ¨å¤åˆ¶ç§¯å‹ç¼“å†²åŒºä¸­æ‰¾åˆ°ä»æœåŠ¡å™¨ç¼ºå°‘çš„æ•°æ®ï¼Œå¹¶å°†è¿™äº›æ•°æ®é‡æ–°å‘é€ç»™ä»æœåŠ¡å™¨ã€‚")]),v._v(" "),_("h2",{attrs:{id:"äº”ã€å¤åˆ¶çš„æµç¨‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#äº”ã€å¤åˆ¶çš„æµç¨‹"}},[v._v("#")]),v._v(" äº”ã€å¤åˆ¶çš„æµç¨‹")]),v._v(" "),_("p",[v._v("é€šè¿‡å‘ä»æœåŠ¡å™¨å‘é€å¦‚ä¸‹ SLAVEOF å‘½ä»¤ï¼Œå¯ä»¥è®©ä¸€ä¸ªä»æœåŠ¡å™¨å»å¤åˆ¶ä¸€ä¸ªä¸»æœåŠ¡å™¨ã€‚")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("SLAVEOF <master_ip> <master_port>\n")])])]),_("h3",{attrs:{id:"æ­¥éª¤-1-è®¾ç½®ä¸»ä»æœåŠ¡å™¨"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-1-è®¾ç½®ä¸»ä»æœåŠ¡å™¨"}},[v._v("#")]),v._v(" æ­¥éª¤ 1. è®¾ç½®ä¸»ä»æœåŠ¡å™¨")]),v._v(" "),_("p",[v._v("é…ç½®ä¸€ä¸ªä»æœåŠ¡å™¨éå¸¸ç®€å•ï¼Œ åªè¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹çš„è¿™ä¸€è¡Œå°±å¯ä»¥äº†ï¼š")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("slaveof 127.0.0.1 6379\n")])])]),_("p",[v._v("å½“ç„¶ï¼Œ ä½ éœ€è¦å°†ä»£ç ä¸­çš„ "),_("code",[v._v("127.0.0.1")]),v._v(" å’Œ "),_("code",[v._v("6379")]),v._v(" æ›¿æ¢æˆä½ çš„ä¸»æœåŠ¡å™¨çš„ IP å’Œç«¯å£å·ã€‚")]),v._v(" "),_("p",[v._v("å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯è°ƒç”¨ "),_("a",{attrs:{href:"http://redisdoc.com/replication/slaveof.html#slaveof",target:"_blank",rel:"noopener noreferrer"}},[v._v("SLAVEOF host port"),_("OutboundLink")],1),v._v(" å‘½ä»¤ï¼Œ è¾“å…¥ä¸»æœåŠ¡å™¨çš„ IP å’Œç«¯å£ï¼Œ ç„¶ååŒæ­¥å°±ä¼šå¼€å§‹ï¼š")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("127.0.0.1:6379> SLAVEOF 127.0.0.1 10086\nOK\n")])])]),_("h3",{attrs:{id:"æ­¥éª¤-2-ä¸»ä»æœåŠ¡å™¨å»ºç«‹-tcp-è¿æ¥ã€‚"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-2-ä¸»ä»æœåŠ¡å™¨å»ºç«‹-tcp-è¿æ¥ã€‚"}},[v._v("#")]),v._v(" æ­¥éª¤ 2. ä¸»ä»æœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ã€‚")]),v._v(" "),_("h3",{attrs:{id:"æ­¥éª¤-3-å‘é€-ping-æ£€æŸ¥é€šä¿¡çŠ¶æ€ã€‚"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-3-å‘é€-ping-æ£€æŸ¥é€šä¿¡çŠ¶æ€ã€‚"}},[v._v("#")]),v._v(" æ­¥éª¤ 3. å‘é€ PING æ£€æŸ¥é€šä¿¡çŠ¶æ€ã€‚")]),v._v(" "),_("h3",{attrs:{id:"æ­¥éª¤-4-èº«ä»½éªŒè¯ã€‚"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-4-èº«ä»½éªŒè¯ã€‚"}},[v._v("#")]),v._v(" æ­¥éª¤ 4. èº«ä»½éªŒè¯ã€‚")]),v._v(" "),_("p",[v._v("å¦‚æœä¸»æœåŠ¡å™¨æ²¡æœ‰è®¾ç½® "),_("code",[v._v("requirepass")]),v._v(" ï¼Œä»æœåŠ¡å™¨æ²¡æœ‰è®¾ç½® "),_("code",[v._v("masterauth")]),v._v("ï¼Œåˆ™ä¸è¿›è¡Œèº«ä»½éªŒè¯ï¼›åä¹‹ï¼Œåˆ™éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ã€‚å¦‚æœèº«ä»½éªŒè¯å¤±è´¥ï¼Œåˆ™æ”¾å¼ƒæ‰§è¡Œå¤åˆ¶å·¥ä½œã€‚")]),v._v(" "),_("p",[v._v("å¦‚æœä¸»æœåŠ¡å™¨é€šè¿‡ "),_("code",[v._v("requirepass")]),v._v(" é€‰é¡¹è®¾ç½®äº†å¯†ç ï¼Œ é‚£ä¹ˆä¸ºäº†è®©ä»æœåŠ¡å™¨çš„åŒæ­¥æ“ä½œå¯ä»¥é¡ºåˆ©è¿›è¡Œï¼Œ æˆ‘ä»¬ä¹Ÿå¿…é¡»ä¸ºä»æœåŠ¡å™¨è¿›è¡Œç›¸åº”çš„èº«ä»½éªŒè¯è®¾ç½®ã€‚")]),v._v(" "),_("p",[v._v("å¯¹äºä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„æœåŠ¡å™¨ï¼Œ å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("config set masterauth <password>\n")])])]),_("p",[v._v("è¦æ°¸ä¹…åœ°è®¾ç½®è¿™ä¸ªå¯†ç ï¼Œ é‚£ä¹ˆå¯ä»¥å°†å®ƒåŠ å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("masterauth <password>\n")])])]),_("p",[v._v("å¦å¤–è¿˜æœ‰å‡ ä¸ªé€‰é¡¹ï¼Œ å®ƒä»¬å’Œä¸»æœåŠ¡å™¨æ‰§è¡Œéƒ¨åˆ†é‡åŒæ­¥æ—¶æ‰€ä½¿ç”¨çš„å¤åˆ¶æµç¼“å†²åŒºæœ‰å…³ï¼Œ è¯¦ç»†çš„ä¿¡æ¯å¯ä»¥å‚è€ƒ Redis æºç ä¸­é™„å¸¦çš„ "),_("code",[v._v("redis.conf")]),v._v(" ç¤ºä¾‹æ–‡ä»¶ã€‚")]),v._v(" "),_("h3",{attrs:{id:"æ­¥éª¤-5-å‘é€ç«¯å£ä¿¡æ¯ã€‚"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-5-å‘é€ç«¯å£ä¿¡æ¯ã€‚"}},[v._v("#")]),v._v(" æ­¥éª¤ 5. å‘é€ç«¯å£ä¿¡æ¯ã€‚")]),v._v(" "),_("p",[v._v("ä»æœåŠ¡å™¨æ‰§è¡Œ "),_("code",[v._v("REPLCONF listening-port <port-number>")]),v._v(" ï¼Œå‘ä¸»æœåŠ¡å™¨å‘é€ä»æœåŠ¡å™¨çš„ç›‘å¬ç«¯å£å·ã€‚")]),v._v(" "),_("h3",{attrs:{id:"æ­¥éª¤-6-åŒæ­¥ã€‚"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-6-åŒæ­¥ã€‚"}},[v._v("#")]),v._v(" æ­¥éª¤ 6. åŒæ­¥ã€‚")]),v._v(" "),_("p",[v._v("å‰æ–‡å·²ä»‹ç»ï¼Œæ­¤å¤„ä¸èµ˜è¿°ã€‚")]),v._v(" "),_("h3",{attrs:{id:"æ­¥éª¤-7-å‘½ä»¤ä¼ æ’­ã€‚"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤-7-å‘½ä»¤ä¼ æ’­ã€‚"}},[v._v("#")]),v._v(" æ­¥éª¤ 7. å‘½ä»¤ä¼ æ’­ã€‚")]),v._v(" "),_("p",[v._v("åœ¨å‘½ä»¤ä¼ æ’­é˜¶æ®µï¼Œä»æœåŠ¡å™¨é»˜è®¤ä¼šä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡ï¼Œå‘ä¸»æœåŠ¡å‘é€å‘½ä»¤ï¼š")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("REPLCONF ACK <replication_coffset>\n")])])]),_("p",[v._v("å‘½ä»¤çš„ä½œç”¨ï¼š")]),v._v(" "),_("ul",[_("li",[v._v("æ£€æµ‹ä¸»ä»æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥çŠ¶æ€ã€‚")]),v._v(" "),_("li",[v._v("è¾…åŠ©å®ç° min-slave é€‰é¡¹ã€‚")]),v._v(" "),_("li",[v._v("æ£€æµ‹å‘½ä»¤ä¸¢å¤±ã€‚")])]),v._v(" "),_("h2",{attrs:{id:"å…­ã€å¤åˆ¶çš„é…ç½®é¡¹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å…­ã€å¤åˆ¶çš„é…ç½®é¡¹"}},[v._v("#")]),v._v(" å…­ã€å¤åˆ¶çš„é…ç½®é¡¹")]),v._v(" "),_("p",[v._v("ä» Redis 2.8 å¼€å§‹ï¼Œ ä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ï¼Œ å¯ä»¥é€šè¿‡é…ç½®ï¼Œ è®©ä¸»æœåŠ¡å™¨åªåœ¨æœ‰è‡³å°‘ N ä¸ªå½“å‰å·²è¿æ¥ä»æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œ æ‰æ‰§è¡Œå†™å‘½ä»¤ã€‚")]),v._v(" "),_("p",[v._v("ä¸è¿‡ï¼Œ å› ä¸º Redis ä½¿ç”¨å¼‚æ­¥å¤åˆ¶ï¼Œ æ‰€ä»¥ä¸»æœåŠ¡å™¨å‘é€çš„å†™æ•°æ®å¹¶ä¸ä¸€å®šä¼šè¢«ä»æœåŠ¡å™¨æ¥æ”¶åˆ°ï¼Œ å› æ­¤ï¼Œ æ•°æ®ä¸¢å¤±çš„å¯èƒ½æ€§ä»ç„¶æ˜¯å­˜åœ¨çš„ã€‚")]),v._v(" "),_("p",[v._v("ä»¥ä¸‹æ˜¯è¿™ä¸ªç‰¹æ€§çš„è¿ä½œåŸç†ï¼š")]),v._v(" "),_("ul",[_("li",[v._v("ä»æœåŠ¡å™¨ä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡ PING ä¸»æœåŠ¡å™¨ä¸€æ¬¡ï¼Œ å¹¶æŠ¥å‘Šå¤åˆ¶æµçš„å¤„ç†æƒ…å†µã€‚")]),v._v(" "),_("li",[v._v("ä¸»æœåŠ¡å™¨ä¼šè®°å½•å„ä¸ªä»æœåŠ¡å™¨æœ€åä¸€æ¬¡å‘å®ƒå‘é€ PING çš„æ—¶é—´ã€‚")]),v._v(" "),_("li",[v._v("ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½®ï¼Œ æŒ‡å®šç½‘ç»œå»¶è¿Ÿçš„æœ€å¤§å€¼ "),_("code",[v._v("min-slaves-max-lag")]),v._v(" ï¼Œ ä»¥åŠæ‰§è¡Œå†™æ“ä½œæ‰€éœ€çš„è‡³å°‘ä»æœåŠ¡å™¨æ•°é‡ "),_("code",[v._v("min-slaves-to-write")]),v._v(" ã€‚")])]),v._v(" "),_("p",[v._v("å¦‚æœè‡³å°‘æœ‰ "),_("code",[v._v("min-slaves-to-write")]),v._v(" ä¸ªä»æœåŠ¡å™¨ï¼Œ å¹¶ä¸”è¿™äº›æœåŠ¡å™¨çš„å»¶è¿Ÿå€¼éƒ½å°‘äº "),_("code",[v._v("min-slaves-max-lag")]),v._v("ç§’ï¼Œ é‚£ä¹ˆä¸»æœåŠ¡å™¨å°±ä¼šæ‰§è¡Œå®¢æˆ·ç«¯è¯·æ±‚çš„å†™æ“ä½œã€‚")]),v._v(" "),_("p",[v._v("ä½ å¯ä»¥å°†è¿™ä¸ªç‰¹æ€§çœ‹ä½œ CAP ç†è®ºä¸­çš„ C çš„æ¡ä»¶æ”¾å®½ç‰ˆæœ¬ï¼š å°½ç®¡ä¸èƒ½ä¿è¯å†™æ“ä½œçš„æŒä¹…æ€§ï¼Œ ä½†èµ·ç ä¸¢å¤±æ•°æ®çš„çª—å£ä¼šè¢«ä¸¥æ ¼é™åˆ¶åœ¨æŒ‡å®šçš„ç§’æ•°ä¸­ã€‚")]),v._v(" "),_("p",[v._v("å¦ä¸€æ–¹é¢ï¼Œ å¦‚æœæ¡ä»¶è¾¾ä¸åˆ° "),_("code",[v._v("min-slaves-to-write")]),v._v(" å’Œ "),_("code",[v._v("min-slaves-max-lag")]),v._v(" æ‰€æŒ‡å®šçš„æ¡ä»¶ï¼Œ é‚£ä¹ˆå†™æ“ä½œå°±ä¸ä¼šè¢«æ‰§è¡Œï¼Œ ä¸»æœåŠ¡å™¨ä¼šå‘è¯·æ±‚æ‰§è¡Œå†™æ“ä½œçš„å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚")]),v._v(" "),_("p",[v._v("ä»¥ä¸‹æ˜¯è¿™ä¸ªç‰¹æ€§çš„ä¸¤ä¸ªé€‰é¡¹å’Œå®ƒä»¬æ‰€éœ€çš„å‚æ•°ï¼š")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("min-slaves-to-write <number of slaves>")])]),v._v(" "),_("li",[_("code",[v._v("min-slaves-max-lag <number of seconds>")])])]),v._v(" "),_("p",[v._v("è¯¦ç»†çš„ä¿¡æ¯å¯ä»¥å‚è€ƒ Redis æºç ä¸­é™„å¸¦çš„ "),_("code",[v._v("redis.conf")]),v._v(" ç¤ºä¾‹æ–‡ä»¶ã€‚")]),v._v(" "),_("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[v._v("#")]),v._v(" å‚è€ƒèµ„æ–™")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("å®˜ç½‘")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://redis.io/",target:"_blank",rel:"noopener noreferrer"}},[v._v("Redis å®˜ç½‘"),_("OutboundLink")],1)]),v._v(" "),_("li",[_("a",{attrs:{href:"https://github.com/antirez/redis",target:"_blank",rel:"noopener noreferrer"}},[v._v("Redis github"),_("OutboundLink")],1)]),v._v(" "),_("li",[_("a",{attrs:{href:"http://redis.cn/",target:"_blank",rel:"noopener noreferrer"}},[v._v("Redis å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆ"),_("OutboundLink")],1)])])]),v._v(" "),_("li",[_("strong",[v._v("ä¹¦ç±")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://item.jd.com/11791607.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("ã€ŠRedis å®æˆ˜ã€‹"),_("OutboundLink")],1)]),v._v(" "),_("li",[_("a",{attrs:{href:"https://item.jd.com/11486101.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹"),_("OutboundLink")],1)])])]),v._v(" "),_("li",[_("strong",[v._v("æ•™ç¨‹")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"http://redisdoc.com/",target:"_blank",rel:"noopener noreferrer"}},[v._v("Redis å‘½ä»¤å‚è€ƒ"),_("OutboundLink")],1)])])])])])}),[],!1,null,null,null);_.default=a.exports}}]);